<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>User Management - Modern Mart</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" />
     <link rel="stylesheet" href="css/main.css" />
     <link rel="stylesheet" href="css/admin-dashboard.css">
     <style>
          body {
               font-family: Arial, sans-serif;
               background-color: #f4f4f4;
               margin: 0;
               padding: 0;
          }

          .header {
               background: linear-gradient(90deg, #4c51bf, #6f7dff);
               color: white;
               padding: 20px;
               text-align: center;
          }

          .header h1 {
               margin: 0;
               font-size: 32px;
          }

          .container {
               width: 100%;
               padding: 20px;
          }

          .user-table {
               width: 100%;
               border-collapse: collapse;
               margin: 20px 0;
          }

          .user-table th,
          .user-table td {
               border: 1px solid #ddd;
               padding: 8px;
               text-align: center;
          }

          .user-table th {
               background-color: #4c51bf;
               color: white;
          }

          .user-table tr:hover {
               background-color: #f1f1f1;
          }

          .button {
               padding: 10px 15px;
               background-color: #28a745;
               color: white;
               border: none;
               border-radius: 5px;
               cursor: pointer;
               transition: background-color 0.3s;
               margin: 10px 0;
               font-size: 16px;
          }

          .button:hover {
               background-color: #218838;
          }

          .modal {
               display: none;
               z-index: 1;
               left: 0;
               top: 0;
               width: 100%;
               height: 100%;
               overflow: auto;
               padding-top: 60px;
          }

          .modal-content {
               position: fixed;
               top: 50%;
               left: 50%;
               transform: translate(-50%, -50%);
               width: 100%;
               max-width: 500px;
               background-color: #fefefe;
               margin: 5% auto;
               padding: 20px;
               border: 1px solid #888;
               border-radius: 8px;
               box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
          }

          .close {
               color: #aaa;
               float: right;
               font-size: 28px;
               font-weight: bold;
          }

          .close:hover,
          .close:focus {
               color: black;
               text-decoration: none;
               cursor: pointer;
          }

          .editUser {
               background-color: #4CAF50;
               color: white;
               padding: 8px 12px;
               border: none;
               border-radius: 5px;
               transition: background-color 0.3s;
          }

          .editUser:hover {
               background-color: #45a049;
          }

          .deleteUser {
               background-color: #ed190a;
               color: white;
               padding: 8px 12px;
               border: none;
               border-radius: 5px;
               transition: background-color 0.3s;
          }

          .deleteUser:hover {
               background-color: #9c2523;
          }
     </style>
</head>

<body>
     <header class="dashboard-header"
          style="position: relative; display: flex; flex-direction: row; align-items: center;">
          <div class="user-avatar">
               <img src="img/avatars/avatar.jpg" style="height: 70px; width: 70px; border-radius: 50%;"
                    alt="User Avatar" id="userAvatar">
               <div class="admin-name" id="dashboardUsername"
                    style="display: flex; justify-content: flex-start; align-items: center; margin-left: 10px;"></div>
          </div>
          <nav class="header-nav">
               <ul class="dashboard-menu">
                    <li><a href="./index.html" class="menu-item active"><i class="bi bi-house"></i>
                              Main</a></li>
                    <li><a href="./admin-dashboard.html" class="menu-item active"><i class="bi bi-speedometer"></i>
                              Dashboard</a></li>
                    <li><a href="./product.html" class="menu-item"><i class="bi bi-box-seam"></i>
                              Products</a></li>
                    <li><a href="./admin.html" class="menu-item"><i class="bi bi-person"></i> Admin Management</a></li>

               </ul>
          </nav>
     </header>

     <section class="container">
          <button class="button" onclick="openAddUserModal()">Add User</button>
          <table class="user-table">
               <thead>
                    <tr>
                         <th>ID</th>
                         <th>Username</th>
                         <th>Email</th>
                         <th>Password</th>
                         <th>Status</th>
                         <th>User Role</th>
                         <th>Actions</th>
                    </tr>
               </thead>
               <tbody id="userTableBody">
                    <!-- User rows will be populated here -->
               </tbody>
          </table>
     </section>

     <!-- Modal for Adding User -->
     <div id="addUserModal" class="modal">
          <div class="modal-content">
               <span class="close" onclick="closeAddUserModal()">&times;</span>
               <h2 style="margin-bottom: 20px;">Add User</h2>
               <label style="margin-bottom: 10px;">
                    <span style="font-weight: bold;">Username:</span>
                    <input type="text" id="newUsername" required placeholder="Enter username"
                         style="width: 100%; padding: 10px; margin-top: 5px;">
               </label>
               <label style="margin-bottom: 20px;">
                    <span style="font-weight: bold;">Email:</span>
                    <input type="email" id="newEmail" required placeholder="Enter email"
                         style="width: 100%; padding: 10px; margin-top: 5px;">
               </label>
               <label style="margin-bottom: 30px;">
                    <span style="font-weight: bold;">Password:</span>
                    <span id="togglePassword" style="cursor: pointer;">üëÅÔ∏è</span>
                    <input type="password" id="newPassword" required placeholder="Enter password"
                         style="width: 100%; padding: 10px; margin-top: 5px;">
               </label>
               <button onclick="addUser()"
                    style="padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Save
                    User</button>
          </div>
     </div>

     <script src="js/user-account.js"></script>
     <script>
          function openAddUserModal() {
               document.getElementById('addUserModal').style.display = "block";
          }

          function closeAddUserModal() {
               document.getElementById('addUserModal').style.display = "none";
          }

          function addUser() {
               const username = document.getElementById('newUsername').value;
               const email = document.getElementById('newEmail').value;

               // Logic to add user to local storage and update the table
               const users = JSON.parse(localStorage.getItem('users')) || [];
               const newUser = {
                    id: users.length + 1,
                    username: username,
                    email: email,
                    password: document.getElementById('newPassword').value,
                    status: 'Active',
                    role: 'User' // Default role
               };
               users.push(newUser);
               localStorage.setItem('users', JSON.stringify(users));
               loadUsers();
               closeAddUserModal();
          }

          // Function to load users into the table
          function loadUsers() {
               const users = JSON.parse(localStorage.getItem('users')) || [];
               const userTableBody = document.getElementById('userTableBody');
               userTableBody.innerHTML = '';

               users.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>${user.password}</td>
                    <td>${user.status}</td>
                    <td>${user.role}</td>
                    <td>
                        <button class="editUser" onclick="editUser(${user.id})">Edit</button>
                        <button class="deleteUser" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                `;
                    userTableBody.appendChild(row);
               });
          }

          document.addEventListener('DOMContentLoaded', loadUsers);
     </script>
     <script>
          document.querySelector('.admin-name').textContent = sessionStorage.getItem('adminName'); // Call the function to update the header
     </script>
</body>

</html>
